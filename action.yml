# ecr-login/action.yml
name: 'test-automation'
description: 'Test Automation'

inputs:
  testing-tool:
    description: 'testing-tool'
    required: true
  pm-collection:
    description: "postman collection"
    required: true
  pm-env:
    description: "postman env"
    required: true
  env:
    description: 'Environment `prod`, `stg`'
    required: true

runs:
  using: 'composite'
  steps:
    - uses: actions/checkout@v3

    - name: Checkout test collections
      uses: actions/checkout@v3
      with:
        repository: 'Hyunju-Sung/actions-test-collections-repo'
        path: 'test-collections'

    - name: Run API tests
      uses: matt-ball/newman-action@master
      with:
        collection: test-collections/${{ inputs.pm-collection }}
        environment: test-collections/${{ inputs.pm-env }}
      if: ${{ inputs.testing-tool == 'postman'}}